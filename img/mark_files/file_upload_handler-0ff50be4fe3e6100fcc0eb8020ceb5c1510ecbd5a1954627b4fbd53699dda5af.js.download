var RegexHelper={email:/^\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\b$/g,email_with_mailto:/^\bmailto:[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\b$/g,url_no_protocol:/^[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-zA-Z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$/g,url_with_protocol:/^(http:\/\/|https:\/\/)[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-zA-Z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)$/g,is_youtube_url:/youtu\.be|youtube\.com\/(watch|embed)/i,is_vimeo_url:/vimeo\.com/i,youtube_video_url:/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,vimeo_video_url:/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,rgb_rgba:/rgb[a]*\((\d{1,3}),[\s]*(\d{1,3}),[\s]*(\d{1,3})(?:,[\s]*)*([\d]*[\.\d]*)*\)/g},CommonHelper=function(t){function e(){function t(t){var n=16*(e+Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t)}function n(e){var n,l=t.rgb_rgba;return l.lastIndex=0,(n=l.exec(e))?{r:n[1],g:n[2],b:n[3]}:null}function l(t){var e=new RegExp("rgba?\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)","gi");if(!t)return t;var n=t.replace(e,"$1,$2,$3").split(",");return 3==n.length?(r=parseInt(n[0]).toString(16),g=parseInt(n[1]).toString(16),b=parseInt(n[2]).toString(16),r=1==r.length?"0"+r:r,g=1==g.length?"0"+g:g,b=1==b.length?"0"+b:b,"#"+r+g+b):t}function o(t,e){var n=document.createElement("input");return n.setAttribute("type","hidden"),n.setAttribute("name",t),n.setAttribute("value",e),n}function a(t,e){var n,l;return!(!t||!e)&&(n=t.getBoundingClientRect(),l=e.getBoundingClientRect(),!(n.right<l.left||n.left>l.right||n.bottom<l.top||n.top>l.bottom))}function i(t,e){return!(!t||!e)&&e.some(function(e){return a(t,e)})}function p(t){var e=t.filepath,n=t.url;return"/"!==e[0]&&(n=n.replace(e,"/"+e),e="/"+e),{url:n,path:e}}return{generateUUID:e,stringRgbToRgbObject:n,convertRGBToHex:l,hiddenField:o,isOverlapping:a,isElementsOverlapping:i,putSlashInUrlForS3Upload:p}}(RegexHelper);
/*
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
!function(t){function e(e,n,l,o){var a={data:o||0===o||!1===o?o:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:u,nest:d,wrap:s,html:c,update:m};return e&&t.extend(a,e,{nodes:[],parent:n}),l&&(a.tmpl=l,a._ctnt=a._ctnt||a.tmpl(t,a),a.key=++$,(w.length?b:v)[$]=a),a}function n(e,o,a){var r,i=a?t.map(a,function(t){return"string"==typeof t?e.key?t.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+_+'="'+e.key+'" $2'):t:n(t,e,t._ctnt)}):e;return o?i:((i=i.join("")).replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(e,n,o,a){p(r=t(o).get()),n&&(r=l(n).concat(r)),a&&(r=r.concat(l(a)))}),r||l(i))}function l(e){var n=document.createElement("div");return n.innerHTML=e,t.makeArray(n.childNodes)}function o(e){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+t.trim(e).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(e,n,l,o,a,i,p){var u,d,s,c=t.tmpl.tag[l];if(!c)throw"Unknown template tag: "+l;return u=c._default||[],i&&!/\w$/.test(a)&&(a+=i,i=""),a?(a=r(a),p=p?","+r(p)+")":i?")":"",d=i?a.indexOf(".")>-1?a+r(i):"("+a+").call($item"+p:a,s=i?d:"(typeof("+a+")==='function'?("+a+").call($item):("+a+"))"):s=d=u.$1||"null",o=r(o),"');"+c[n?"close":"open"].split("$notnull_1").join(a?"typeof("+a+")!=='undefined' && ("+a+")!=null":"true").split("$1a").join(s).split("$1").join(d).split("$2").join(o||u.$2||"")+"__.push('"})+"');}return __;")}function a(e,l){e._wrap=n(e,!0,t.isArray(l)?l:[h.test(l)?l:t(l).html()]).join("")}function r(t){return t?t.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function i(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function p(n){function l(n){function l(t){r=d[t+=u]=d[t]||e(r,v[r.parent.key+u]||r.parent)}var o,a,r,i,p=n;if(i=n.getAttribute(_)){for(;p.parentNode&&1===(p=p.parentNode).nodeType&&!(o=p.getAttribute(_)););o!==i&&(p=p.parentNode?11===p.nodeType?0:p.getAttribute(_)||0:0,(r=v[i])||((r=e(r=b[i],v[p]||b[p])).key=++$,v[$]=r),x&&l(i)),n.removeAttribute(_)}else x&&(r=t.data(n,"tmplItem"))&&(l(r.key),v[r.key]=r,p=(p=t.data(n.parentNode,"tmplItem"))?p.key:0);if(r){for(a=r;a&&a.key!=p;)a.nodes.push(n),a=a.parent;delete r._ctnt,delete r._wrap,t.data(n,"tmplItem",r)}}var o,a,r,i,p,u="_"+x,d={};for(r=0,i=n.length;r<i;r++)if(1===(o=n[r]).nodeType){for(p=(a=o.getElementsByTagName("*")).length-1;p>=0;p--)l(a[p]);l(o)}}function u(t,e,n,l){if(!t)return w.pop();w.push({_:t,tmpl:e,item:this,data:n,options:l})}function d(e,n,l){return t.tmpl(t.template(e),n,l,this)}function s(e,n){var l=e.options||{};return l.wrapped=n,t.tmpl(t.template(e.tmpl),e.data,l,e.item)}function c(e,n){var l=this._wrap;return t.map(t(t.isArray(l)?l.join(""):l).filter(e||"*"),function(t){return n?t.innerText||t.textContent:t.outerHTML||i(t)})}function m(){var e=this.nodes;t.tmpl(null,null,null,this).insertBefore(e[0]),t(e).remove()}var f,g=t.fn.domManip,_="_tmplitem",h=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,v={},b={},y={key:0,data:{}},$=0,x=0,w=[];t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){t.fn[e]=function(l){var o,a,r,i,p=[],u=t(l),d=1===this.length&&this[0].parentNode;if(f=v||{},d&&11===d.nodeType&&1===d.childNodes.length&&1===u.length)u[n](this[0]),p=this;else{for(a=0,r=u.length;a<r;a++)x=a,o=(a>0?this.clone(!0):this).get(),t(u[a])[n](o),p=p.concat(o);x=0,p=this.pushStack(p,e,u.selector)}return i=f,f=null,t.tmpl.complete(i),p}}),t.fn.extend({tmpl:function(e,n,l){return t.tmpl(this[0],e,n,l)},tmplItem:function(){return t.tmplItem(this[0])},template:function(e){return t.template(e,this[0])},domManip:function(e,n,l){if(e[0]&&t.isArray(e[0])){for(var o,a=t.makeArray(arguments),r=e[0],i=r.length,p=0;p<i&&!(o=t.data(r[p++],"tmplItem")););o&&x&&(a[2]=function(e){t.tmpl.afterManip(this,e,l)}),g.apply(this,a)}else g.apply(this,arguments);return x=0,!f&&t.tmpl.complete(v),this}}),t.extend({tmpl:function(l,o,r,i){var p,u=!i;if(u)i=y,l=t.template[l]||t.template(null,l),b={};else if(!l)return l=i.tmpl,v[i.key]=i,i.nodes=[],i.wrapped&&a(i,i.wrapped),t(n(i,null,i.tmpl(t,i)));return l?("function"==typeof o&&(o=o.call(i||{})),r&&r.wrapped&&a(r,r.wrapped),p=t.isArray(o)?t.map(o,function(t){return t?e(r,i,l,t):null}):[e(r,i,l,o)],u?t(n(i,null,p)):p):[]},tmplItem:function(e){var n;for(e instanceof t&&(e=e[0]);e&&1===e.nodeType&&!(n=t.data(e,"tmplItem"))&&(e=e.parentNode););return n||y},template:function(e,n){return n?("string"==typeof n?n=o(n):n instanceof t&&(n=n[0]||{}),n.nodeType&&(n=t.data(n,"tmpl")||t.data(n,"tmpl",o(n.innerHTML))),"string"==typeof e?t.template[e]=n:n):e?"string"!=typeof e?t.template(null,e):t.template[e]||t.template(null,h.test(e)?e:t(e)):null},encode:function(t){return(""+t).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),t.extend(t.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){v={}},afterManip:function(e,n,l){var o=11===n.nodeType?t.makeArray(n.childNodes):1===n.nodeType?[n]:[];l.call(e,n),p(o),x++}})}(jQuery),function(t){t(document).ready(function(){t("body").append('<div class="modal fade" id="cms-upload-dialog" tabindex="-1" role="dialog" aria-labelledby="cms-upload-dialogLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="cms-upload-dialogLabel">'+I18n.t("cms.files.new.file_upload")+'</h4></div><div class="modal-body"><div class="form-container"></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+I18n.t("cms.files.new.close")+"</button></div></div></div></div>")});var e={openUploadDialog:function(n){var l,o=t("#cms-upload-dialog");o.find("form");e.resetUploadDialog(),l=t("#upload-form-url").tmpl?t("#upload-form-url").tmpl().text():"/cms/arquivos/novo",o.find(".form-container").empty(),o.find(".form-container").load(l,function(){var l=t(this);t("#cms-upload-dialog #s3-uploader").off("s3_upload_complete"),t("#cms-upload-dialog #s3-uploader").bind("s3_upload_complete",function(l,o){if(o&&o.url&&!t("#upload-modal-close").is(":visible")){var a=CommonHelper.putSlashInUrlForS3Upload(o);n({url:a.url,type:o.filetype}),e.closeUploadDialog()}}),t("#cms-upload-dialog #s3-uploader").bind("s3_upload_failed",e.handleUploadError),t.station.initVisualComponents(l),t.station.resetLoadingButtons()}),o.modal("show")},resetUploadDialog:function(){t("#cms-upload-dialog").find(".btn").button("reset"),t("#cms-upload-dialog").find("#error-container").remove()},closeUploadDialog:function(){e.resetUploadDialog(),t("#cms-upload-dialog").modal("hide")},handleUploadError:function(n,l){var o=l.error_thrown;t("#cms-upload-dialog form").prepend('<div class="alert alert-danger" id="error-container">'+o+"</div>"),e.closeUploadDialog()}};t.fn.RDFileUploader=function(t){e.openUploadDialog(t)},window.RD.openUploadDialog=function(t){e.openUploadDialog(t)}}(jQuery);